<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Market Jeaks - Carrito de Compras</title>
    <link rel="stylesheet" href="CSS/carrito.css">
    <link rel="shortcut icon" href="img/ico.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
</head>

<body>

    <header class="header">
        <div class="container header-content">
            <div class="logo">
                <img src="img/pixelcut-export.png" alt="Logo de Market Jeaks">
                <h2>Market Jeaks</h2>
            </div>
            <nav class="main-nav">
                <ul class="nav-list">
                    <li><a href="index.html" class="nav-link">Tienda</a></li>
                    <li><a href="ofertas.html" class="nav-link">Ofertas</a></li>
                    <li><a href="contact.html" class="nav-link">Contacto</a></li>
                    <li>
                        <a href="carrito.html" class="nav-link nav-cart">
                            <i class="fas fa-shopping-cart"></i> Carrito (<span class="cart-count">0</span>)
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="container cart-layout">
        <!-- Columna izquierda: productos -->
        <section class="cart-items">
            <h2>Tu Carrito</h2>
            <ul id="cart-list"></ul>
        </section>

        <!-- Columna derecha: resumen y pago -->
        <aside class="cart-summary">
            <h2>Resumen de la compra</h2>
            <p><strong>Total: <span id="cart-total">$0.00</span></strong></p>
            <button id="clear-cart-btn" class="btn clear-cart-btn">Vaciar Carrito</button>

            <div class="payment">
                <h3>Pagar</h3>
                <form class="payment-form">
                    <div class="form-group">
                        <label for="card">Número de tarjeta</label>
                        <input type="text" id="card" name="card" placeholder="1234 5678 9101 1121" required>
                    </div>
                    <div class="form-group">
                        <label for="name">Nombre en la tarjeta</label>
                        <input type="text" id="name" name="name" placeholder="Tu nombre completo" required>
                    </div>
                    <div class="form-group">
                        <label for="expiry">Fecha de expiración</label>
                        <input type="text" id="expiry" name="expiry" placeholder="MM/AA" required>
                    </div>
                    <div class="form-group">
                        <label for="cvv">CVV</label>
                        <input type="text" id="cvv" name="cvv" placeholder="123" required>
                    </div>
                    <button type="submit" class="btn pay-btn">Pagar Ahora</button>
                </form>
            </div>
        </aside>
    </main>

    <footer class="footer">
        <div class="container footer-content">
            <div class="footer-column">
                <h3 class="footer-heading">Sobre nosotros</h3>
                <p class="footer-text">Somos una tienda dedicada a ofrecer los mejores productos a precios competitivos.</p>
            </div>
            <div class="footer-column">
                <h3 class="footer-heading">Enlaces rápidos</h3>
                <ul class="footer-links">
                    <li><a href="index.html" class="footer-link">Inicio</a></li>
                    <li><a href="ofertas.html" class="footer-link">Tienda</a></li>
                    <li><a href="contact.html" class="footer-link">Contacto</a></li>
                    <li><a href="#" class="footer-link">Términos y condiciones</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3 class="footer-heading">Síguenos</h3>
                <ul class="social-icons">
                    <li><a href="#" class="social-icon-link"><i class="fab fa-facebook-f"></i></a></li>
                    <li><a href="#" class="social-icon-link"><i class="fab fa-twitter"></i></a></li>
                    <li><a href="#" class="social-icon-link"><i class="fab fa-instagram"></i></a></li>
                </ul>
            </div>
        </div>
        <p class="footer-copy">© 2024 Market Jeaks. Todos los derechos reservados.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const cartList = document.getElementById('cart-list');
            const cartTotal = document.getElementById('cart-total');
            const clearCartBtn = document.getElementById('clear-cart-btn');
            const cartCountSpan = document.querySelector('.cart-count');

            let cart = JSON.parse(localStorage.getItem('cart')) || [];

            function renderCart() {
                cartList.innerHTML = '';
                let total = 0;

                if (cart.length === 0) {
                    cartList.innerHTML = '<p>El carrito está vacío.</p>';
                } else {
                    cart.forEach((product, index) => {
                        const productItem = document.createElement('li');
                        productItem.classList.add('cart-item');
                        productItem.innerHTML = `
                            <span>${product.name}</span>
                            <span>$${product.price.toFixed(2)}</span>
                            <button data-index="${index}"><i class="fas fa-trash-alt"></i></button>
                        `;
                        cartList.appendChild(productItem);
                        total += product.price;
                    });
                }

                cartTotal.textContent = `$${total.toFixed(2)}`;
                cartCountSpan.textContent = cart.length;

                document.querySelectorAll('.cart-item button').forEach(button => {
                    button.addEventListener('click', (event) => {
                        const index = event.target.closest('button').dataset.index;
                        removeItemFromCart(index);
                    });
                });
            }

            function removeItemFromCart(index) {
                cart.splice(index, 1);
                localStorage.setItem('cart', JSON.stringify(cart));
                renderCart();
            }

            function clearCart() {
                cart = [];
                localStorage.setItem('cart', JSON.stringify(cart));
                renderCart();
                alert('El carrito ha sido vaciado.');
            }

            clearCartBtn.addEventListener('click', clearCart);
            renderCart();
        });
    </script>
</body>
</html>
